<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>30 Dni Koktajli</title>
    <style>
        /* --- OG√ìLNY STYL I ZMIENNE --- */
        :root {
            --primary-color: #4CAF50; /* Ziele≈Ñ */
            --secondary-color: #8BC34A; /* Jasna ziele≈Ñ */
            --text-color: #333;
            --background-color: #f7f7f7;
            --completed-color: #E8F5E9; /* Bardzo jasna ziele≈Ñ */
            --action-color: #FF9800; /* Pomara≈Ñcz - Akcent */
            --shadow-light: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            transition: background-color 0.3s;
        }

        /* --- STYLY EKRANU G≈Å√ìWNEGO --- */
        #home-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            background: linear-gradient(135deg, var(--completed-color), var(--background-color));
        }

        .logo-icon {
            font-size: 80px;
            margin-bottom: 20px;
            color: var(--primary-color);
            animation: pulse 2s infinite ease-in-out;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        #home-screen h1 {
            font-size: 32px;
            color: var(--primary-color);
            margin-bottom: 10px;
            font-weight: 700;
        }

        #home-screen p {
            font-size: 18px;
            color: var(--text-color);
            margin-bottom: 40px;
            max-width: 350px;
        }

        .start-button {
            padding: 15px 40px;
            background-color: var(--action-color);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 20px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(255, 152, 0, 0.4);
            transition: all 0.2s ease;
        }

        .start-button:active {
            transform: scale(0.98);
            box-shadow: 0 2px 5px rgba(255, 152, 0, 0.5);
        }

        /* --- STYLY EKRANU APLIKACJI (Z KOKTAJLE.HTML) --- */
        #app-screen {
            display: none; /* Ukryte domy≈õlnie */
            padding-bottom: 90px;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px 15px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 10px;
            position: sticky; /* Zatrzymuje nag≈Ç√≥wek na g√≥rze */
            top: 0;
            z-index: 50;
        }

        .app-header h1 {
            font-size: 24px;
            margin: 0;
            font-weight: 600;
        }

        .container {
            padding: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* KARTY DNI */
        .day-card {
            background-color: white;
            border-radius: 12px;
            margin-bottom: 12px;
            padding: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: background-color 0.3s ease, transform 0.2s ease;
            position: relative;
        }

        /* Styl dla uko≈Ñczonego dnia */
        .day-card.completed {
            background-color: var(--completed-color);
            border-left: 5px solid var(--secondary-color);
        }

        /* Styl dla AKTYWNEGO dnia */
        .day-card.active {
            box-shadow: 0 4px 10px rgba(255, 152, 0, 0.4);
            border: 2px solid var(--action-color);
            transform: scale(1.02);
            order: -1;
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .day-header h2 {
            font-size: 18px;
            margin: 0;
            font-weight: 500;
            flex-grow: 1;
        }

        .day-header .day-number {
            background-color: var(--primary-color);
            color: white;
            padding: 5px 12px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 700;
            margin-right: 10px;
        }

        /* Szczeg√≥≈Çy (rozwijane) */
        .shake-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            padding-top: 0;
        }

        .day-card.open .shake-details {
            max-height: 300px;
            padding-top: 10px;
        }

        .shake-details p {
            margin: 5px 0;
            font-size: 14px;
            line-height: 1.5;
        }

        .toggle-icon {
            font-size: 20px;
            transform: rotate(0deg);
            transition: transform 0.3s;
            margin-left: 10px;
        }

        .day-card.open .toggle-icon {
            transform: rotate(180deg);
        }

        /* Checkbox */
        .checkbox {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 25px;
            height: 25px;
            cursor: pointer;
            z-index: 10;
        }

        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 25px;
            width: 25px;
            background-color: #eee;
            border-radius: 50%;
            transition: 0.2s;
        }

        .day-card.completed .checkmark {
            background-color: var(--secondary-color);
        }

        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
            left: 9px;
            top: 5px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 3px 3px 0;
            transform: rotate(45deg);
        }
        .day-card.completed .checkmark:after {
            display: block;
        }

        /* PRZYCISK G≈Å√ìWNEJ AKCJI (FIXED FOOTER) */
        #action-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 15px;
            box-sizing: border-box;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }

        #complete-button {
            width: 100%;
            padding: 15px;
            background-color: var(--action-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }

        #complete-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        #complete-button:active:not(:disabled) {
            transform: scale(0.98);
        }
        
        /* WIZUALNA STABILIZACJA */
        #shake-list {
            opacity: 0;
            transition: opacity 0.2s ease-in;
        }
        
    </style>
</head>
<body>

    <!-- 1. EKRAN G≈Å√ìWNY (POWITANIE) -->
    <div id="home-screen">
        <div class="logo-icon">üçπ</div>
        <h1>30 Dni Zdrowych Koktajli</h1>
        <p>Rozpocznij swoje wyzwanie ju≈º dzi≈õ! Odkryj 30 unikalnych, po≈ºywnych przepis√≥w i ≈õled≈∫ swoje postƒôpy prosto na telefonie.</p>
        <button class="start-button" onclick="launchApp()">Rozpocznij Wyzwanie!</button>
    </div>

    <!-- 2. EKRAN APLIKACJI (PLAN KOKTAJLOWY) -->
    <div id="app-screen">
        <header class="app-header">
            <h1>üí™ 30 Dni Koktajli</h1>
            <p style="font-size: 14px; opacity: 0.8; margin-top: 5px;">Plan jest interaktywny i zapisuje Tw√≥j postƒôp!</p>
        </header>

        <div class="container" id="shake-list">
            <!-- Karty dni zostanƒÖ wygenerowane przez JavaScript -->
        </div>

        <!-- Pasek z przyciskiem akcji -->
        <div id="action-bar">
            <button id="complete-button" disabled>≈Åadowanie...</button>
        </div>
    </div>

    <script>
        // DANE PLANU DIETY (W JƒòZYKU POLSKIM)
        const shakePlan = [
            { day: 1, name: "Podstawowa Zielenina", ingredients: "Szpinak, Banan, Mleko Migda≈Çowe, Nasiona Chia (omega-3, b≈Çonnik)." },
            { day: 2, name: "Jagodowa Bomba Antyoksydacyjna", ingredients: "Mieszanka Jag√≥d (antyoksydanty), Jogurt Grecki (bia≈Çko), Woda, Mi√≥d (opcjonalnie)." },
            { day: 3, name: "Tropikalna Odporno≈õƒá", ingredients: "Mango, Ananas (Witamina C), Woda Kokosowa (elektrolity), Imbir." },
            { day: 4, name: "Orzechowy Power", ingredients: "Mas≈Ço Orzechowe (bia≈Çko, zdrowe t≈Çuszcze), Banan, P≈Çatki Owsiane (b≈Çonnik), Mleko." },
            { day: 5, name: "Kremowa Rozkosz z Awokado", ingredients: "Awokado (zdrowe t≈Çuszcze), Szpinak, Jab≈Çko, Woda/L√≥d." },
            { day: 6, name: "Czekoladowa Regeneracja", ingredients: "Mro≈ºone Wi≈õnie (przeciwzapalne), Kakao Naturalne, Od≈ºywka Bia≈Çkowa (opcjonalnie), Woda." },
            { day: 7, name: "Energia z Chia", ingredients: "Mleko Migda≈Çowe, Banan, Cynamon, 2 ≈Çy≈ºki Nasion Chia (namoczone)." },
            // Tydzie≈Ñ 2: B≈Çonnik
            { day: 8, name: "Pomara≈Ñczowy Blask Marchewki", ingredients: "Marchew, Pomara≈Ñcza (Witaminy A i C), Imbir, Siemiƒô Lniane (b≈Çonnik)." },
            { day: 9, name: "Daktyle i Orzechy W≈Çoskie", ingredients: "Namoczone Daktyle, Orzechy W≈Çoskie (omega-3), Mleko, Ekstrakt Waniliowy." },
            { day: 10, name: "Probiotyczny Kefir", ingredients: "Kefir (probiotyki), Bor√≥wki, Banan, Woda." },
            { day: 11, name: "Owsiany Koktajl ≈öniadaniowy", ingredients: "P≈Çatki Owsiane, Od≈ºywka Bia≈Çkowa, Cynamon, Woda/Mleko." },
            { day: 12, name: "Brzoskwinia-Imbir B≈Çonnik", ingredients: "Mro≈ºone Brzoskwinie, Jogurt Grecki, Mielony Imbir, ≈Åuska Babki Jajowatej (opcjonalnie)." },
            { day: 13, name: "Czerwony Burak Detoks", ingredients: "Ugotowany Burak, Jab≈Çko, Sok z Cytryny, Woda." },
            { day: 14, name: "Konopne Kompletne", ingredients: "Nasiona Konopi (bia≈Çko), Jarmu≈º, Banan, Mleko/Woda." },
            // Tydzie≈Ñ 3: M√≥zg i T≈Çuszcze
            { day: 15, name: "Mas≈Ço Migda≈Çowe Bliss", ingredients: "Mas≈Ço Migda≈Çowe (Witamina E), Banan, Kakao ziarna, Mleko Migda≈Çowe." },
            { day: 16, name: "Szpinakowo-Gruszkowa Zielenina", ingredients: "Gruszka (b≈Çonnik), Szpinak, 1 ≈Çy≈ºka Oleju Kokosowego (MCT/zdrowe t≈Çuszcze), Woda." },
            { day: 17, name: "Kurkuma Przeciwzapalna", ingredients: "Mro≈ºone Mango, Kurkuma w Proszku, Czarny Pieprz, Mleko Kokosowe." },
            { day: 18, name: "Twaro≈ºek Kremowy", ingredients: "Serek Wiejski (bia≈Çko), Ananas, Woda/L√≥d." },
            { day: 19, name: "Mieszanka Nasion", ingredients: "Banan, Szpinak, Pestki Dyni, Nasiona S≈Çonecznika (minera≈Çy)." },
            { day: 20, name: "Mas≈Ço Orzechowe Power", ingredients: "Orzechy Nerkowca/Mas≈Ço Nerkowcowe, Syrop Klonowy (opcjonalnie), Mleko, L√≥d." },
            { day: 21, name: "Espresso Kickstart", ingredients: "Kawa Parzona na Zimno, Banan, Od≈ºywka Bia≈Çkowa, L√≥d, Mleko." },
            // Tydzie≈Ñ 4: Superfoods
            { day: 22, name: "Arbuzowy Nawadniacz", ingredients: "Arbuz (nawodnienie, likopen), Sok z Limonki, Miƒôta." },
            { day: 23, name: "Papaja na Trawienie", ingredients: "Papaja (enzymy trawienne), Banan, Woda, Mi√≥d (opcjonalnie)." },
            { day: 24, name: "Spirulina na Minera≈Çy", ingredients: "Banan, Ananas, Szpinak, 1 ≈Çy≈ºeczka Spiruliny w Proszku, Woda." },
            { day: 25, name: "Koktajl S≈Çodki Ziemniak", ingredients: "Ugotowany Batat, Cynamon, Ga≈Çka Muszkato≈Çowa, Mleko." },
            { day: 26, name: "Tofu na Bia≈Çko", ingredients: "Silken Tofu (bia≈Çko), Jagody, Ekstrakt Waniliowy, Woda/Mleko." },
            { day: 27, name: "Kiwi Witamina C", ingredients: "Kiwi (Witamina C), Zielone Winogrona, Szpinak, Woda." },
            { day: 28, name: "Smoothie Czarny Las", ingredients: "Je≈ºyny, Kakao Naturalne, Jogurt Grecki, Mleko Migda≈Çowe." },
            // Koniec
            { day: 29, name: "Ulubiony Restart", ingredients: "Wybierz sw√≥j ulubiony koktajl z dni 1-28. Ciesz siƒô!" },
            { day: 30, name: "Zbilansowany Pe≈Çny Koktajl", ingredients: "Szpinak, Banan, 1 ≈Çy≈ºka Siemiƒô Lniane, 1 ≈Çy≈ºka Od≈ºywka Bia≈Çkowa, 1 ≈Çy≈ºka Mas≈Ço Orzechowe, Woda/Mleko." }
        ];

        let completedDays = {};
        const completionKey = 'shakePlanCompletion';
        
        // Elementy DOM
        const homeScreen = document.getElementById('home-screen');
        const appScreen = document.getElementById('app-screen');
        const listElement = document.getElementById('shake-list');
        const completeButton = document.getElementById('complete-button');


        // --- LOGIKA APLIKACJI KOKTAJLOWEJ ---

        function findCurrentDay() {
            for (let i = 1; i <= shakePlan.length; i++) {
                if (!completedDays[i]) {
                    return i;
                }
            }
            return shakePlan.length + 1;
        }

        function updateActionButton(currentDay) {
            if (currentDay > shakePlan.length) {
                completeButton.textContent = "ü•≥ PLAN UKO≈ÉCZONY!";
                completeButton.disabled = true;
            } else {
                const shakeName = shakePlan.find(item => item.day === currentDay).name;
                completeButton.textContent = `Uko≈Ñcz DZIE≈É ${currentDay}: ${shakeName}`;
                completeButton.disabled = false;
            }
        }

        window.completeCurrentDay = function() {
            const currentDay = findCurrentDay();

            if (currentDay <= shakePlan.length) {
                completedDays[currentDay] = true;
                localStorage.setItem(completionKey, JSON.stringify(completedDays));

                const nextDay = currentDay + 1;
                if (nextDay <= shakePlan.length) {
                    setTimeout(() => {
                        const nextCard = document.querySelector(`.day-card[data-day="${nextDay}"]`);
                        if (nextCard) {
                            nextCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    }, 50);
                }
                
                renderPlan();
            }
        }

        window.toggleCompletion = function(day, event) {
            if (event) event.stopPropagation();

            if (completedDays[day]) {
                delete completedDays[day];
            } else {
                completedDays[day] = true;
            }

            localStorage.setItem(completionKey, JSON.stringify(completedDays));
            renderPlan();
        }

        function renderPlan() {
            listElement.innerHTML = '';
            const currentDay = findCurrentDay();
            const fragment = document.createDocumentFragment();

            shakePlan.forEach(item => {
                const isCompleted = completedDays[item.day] === true;
                const isActive = item.day === currentDay;

                const card = document.createElement('div');
                card.className = `day-card ${isCompleted ? 'completed' : ''} ${isActive ? 'active' : ''}`;
                card.dataset.day = item.day;

                card.innerHTML = `
                    <div class="day-header" tabindex="0">
                        <h2>
                            <span class="day-number">DZIE≈É ${item.day}</span> ${item.name}
                            ${isActive ? '<span style="color: var(--action-color); font-size: 14px; margin-left: 10px;">(DZI≈ö)</span>' : ''}
                        </h2>
                        <div style="display: flex; align-items: center;">
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                    </div>
                    <div class="shake-details">
                        <p><strong>Sk≈Çadniki:</strong> ${item.ingredients}</p>
                    </div>
                    <label class="checkbox" onclick="toggleCompletion(${item.day}, event)">
                        <span class="checkmark"></span>
                    </label>
                `;

                const header = card.querySelector('.day-header');
                header.addEventListener('click', () => {
                    card.classList.toggle('open');
                });

                fragment.appendChild(card);
            });

            listElement.appendChild(fragment);
            updateActionButton(currentDay);

            const activeCard = document.querySelector('.day-card.active');
            if (activeCard && currentDay === activeCard.dataset.day * 1) { 
                 activeCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        // --- LOGIKA PRZE≈ÅƒÑCZANIA WIDOK√ìW ---

        // Funkcja inicjujƒÖca w≈Ça≈õciwƒÖ aplikacjƒô po prze≈ÇƒÖczeniu widoku
        function initApp() {
            // 1. Wczytanie stanu z localStorage
            completedDays = JSON.parse(localStorage.getItem(completionKey)) || {};
            
            // 2. W≈ÇƒÖczenie g≈Ç√≥wnego przycisku
            completeButton.onclick = window.completeCurrentDay;

            // 3. Wyrenderowanie planu
            renderPlan();

            // 4. Ujawnienie zawarto≈õci listy
            listElement.style.opacity = '1'; 
        }

        // Funkcja do prze≈ÇƒÖczania z Ekranu G≈Ç√≥wnego do Aplikacji
        window.launchApp = function() {
            homeScreen.style.display = 'none';
            appScreen.style.display = 'block';
            
            // Lekkie op√≥≈∫nienie, aby zapewniƒá, ≈ºe wy≈õwietlanie jest gotowe przed renderowaniem
            setTimeout(initApp, 50); 
        }

        // U≈ºywamy DOMContentLoaded do sprawdzenia, czy stan jest ju≈º zapisany.
        document.addEventListener('DOMContentLoaded', () => {
            // Sprawdzamy, czy u≈ºytkownik ma ju≈º postƒôp. Je≈õli tak, uruchamiamy od razu aplikacjƒô.
            completedDays = JSON.parse(localStorage.getItem(completionKey));
            
            if (completedDays && Object.keys(completedDays).length > 0) {
                // Je≈õli jest postƒôp, pomi≈Ñ ekran g≈Ç√≥wny
                launchApp();
            } else {
                // Poka≈º ekran g≈Ç√≥wny
                homeScreen.style.display = 'flex';
                appScreen.style.display = 'none';
            }
        });
    </script>
</body>
</html>